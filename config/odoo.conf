[options]
# Database settings
db_host = db
db_port = 5432
db_user = odoo
db_password = odoo_password_change_me
db_name = False  # Set to specific database name or False to allow database selection
db_maxconn = 64
db_template = template0

# Server settings
xmlrpc_port = 8069
longpolling_port = 8072
proxy_mode = True  # Enable when behind nginx/reverse proxy

# Workers (adjust based on your server resources)
# Formula: (CPU cores * 2) + 1
# For 2 CPU cores: (2 * 2) + 1 = 5
workers = 5
max_cron_threads = 2

# Limits (adjusted for 5 workers on a 4GB RAM droplet)
# Available RAM: 4GB - 1GB (PostgreSQL) - 1GB (System) = 2GB for workers
# Per worker: 2GB / 5 = ~400MB, setting conservative limits
limit_memory_hard = 536870912   # 512MB hard limit
limit_memory_soft = 402653184   # 384MB soft limit
limit_request = 8192
limit_time_cpu = 600
limit_time_real = 1200
limit_time_real_cron = 3600

# Logging
log_level = info
log_handler = :INFO
logfile = /var/log/odoo/odoo.log

# Security
admin_passwd = your_master_password_change_me  # Master password for database operations
list_db = False  # Hide database list for security

# Addons
addons_path = /usr/lib/python3/dist-packages/odoo/addons,/mnt/extra-addons

# File storage
data_dir = /var/lib/odoo

# Session
session_timeout = 86400  # 24 hours in seconds